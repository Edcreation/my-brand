<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/images/icon.png" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignUp</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="profile.css">
    <script src="./script.js"></script>
    <script>
        window.onload = tologin()
    </script>
</head>
<body>
    <nav>
        <div class="logo">
            <a href="./index.html#portfolio-intro"><img  src="./images/ED.png" alt="logo"></a>
            <div class="menu" onclick="toggleNav()" >
                <img  src="./images/open.png" id="ig"  alt="image">
            </div>
        </div>
        <div id="actions"  >
            <div class="links">
                <a href="./index.html#about-me">About Me</a>
                <a href="./index.html#skills" >Skills</a>
                <a href="./blog.html">Blog</a>
                <a href="./contacts.html">Contacts</a>
            </div>
            <a href="./login.html" ><button id="loginbutton"  >Login</button></a>
            <img class="propic" id="profilePic" onclick="displayWow()">
            </img>
            <div class="wow-menu" id="wowM">
                <button>Profile</button>
                <button onclick="logOut()">Log Out</button>
            </div>
            <script>
                window.onload = showLoginButton();
            </script>
        </div>
    </nav>
    <script>
        function hide() {
            document.getElementById('donepop').style.display = "block"
        }
        function rehide() {
            document.getElementById("donepop").style.display = "none"
        }
    </script>
    <div class="login-container">
        <div id="popcontact" onclick="rehide()">
                
        </div>
        <div class="container-box">
            <div class="right" >
                <form onsubmit="event.preventDefault(); changeUser()" id="frm" autocomplete="off">
                    <div class="title" id="username">Hi</div>
                    <div class="lock">
                        <img src="./images/addimage.png" alt="" id="imageReceiver">
                        <input type="file" name="image" id="image">
                    </div>
                    <input type="text" name="name" id="name" placeholder="Change User Name" autocomplete="off">
                    <div class="pass">
                        <input type="password" name="pass" id="pass"  placeholder="Old Password" autocomplete="new-password">
                       
                    </div>
                    <div class="pass">
                        <input type="password" name="pass1" id="pass1"  placeholder="New Password" autocomplete="new-password">
                        
                    </div>
                    <button>Save</button>
                </form>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-box">
          <div class="social">
            <a href='https://www.instagram.com/___e.d.d.y/' target="_blank"><img src="./images/instagram.png" alt='instagram' /></a>
            <a href='https://www.linkedin.com/in/eddy-mugisha-4b4a5219a/' target="_blank"><img src="./images/linkedin.png" alt='linkedin' /></a>
            
            <a href='https://www.linkedin.com/in/eddy-mugisha-4b4a5219a/' target="_blank"><img src="./images/twitter.png" alt='twitter' /></a>
            <a href='https://www.linkedin.com/in/eddy-mugisha-4b4a5219a/' target="_blank"><img src="./images/whatsapp.png" alt='whatsapp' /></a>
            <a href='' target="_blank"><img src="./images/gmail.png" alt='gmail' /></a>
          </div>
        </div>
        <div class="copyright">
          <p>All rights reserved by M.J.Eddy 2022 &copy;</p>
        </div>
    </div>
    <script>
        function popContact(x) {
            document.querySelector('#popcontact').style.display = "block";
            document.getElementById('popcontact').innerHTML = x
            setTimeout(() => {
              document.querySelector('#popcontact').style.display = "none";
            }, 5000);
          }
        window.onload = document.getElementById("imageReceiver").src = JSON.parse(localStorage.getItem("tempLog")).image
        window.onload = document.getElementById("username").innerHTML = JSON.parse(localStorage.getItem("tempLog")).name
        window.onload = document.getElementById("profilePic").src = JSON.parse(localStorage.getItem("tempLog")).image
        window.onload = window.localStorage.setItem("tempImage", JSON.parse(localStorage.getItem("tempLog")).image)
        fileEl = document.getElementById('image')
        fileEl.addEventListener('change', () => {
            const fr = new FileReader();
            fr.readAsDataURL(fileEl.files[0]);
            fr.addEventListener('load', () => {
                url = fr.result;
                img = document.getElementById("imageReceiver")
                img.src = url;
                console.log(url)
                try {
                    window.localStorage.setItem('tempImage', url);
                  } catch(e) {
                    if (e.code == 22) {
                      popContact("Image Too Big")
                    }
                  }
            })
        }) 
        document.getElementById("loginbutton").style.display = "none" 
        function togglePasswordVisibility() {
            var x = document.getElementById("pass");
            if (x.type === "password") {
              x.type = "text";
            } else {
              x.type = "password";
            }
          }

    </script>
</body>
</html>